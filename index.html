<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitor Regional MEF | Lambayeque</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root { --mef-blue: #0d47a1; }
        body { background-color: #f4f7f6; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .navbar { background-color: var(--mef-blue) !important; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        /* KPIs */
        .card-kpi { border: none; border-radius: 12px; transition: 0.3s; color: white; }
        
        /* Tarjetas de Proyecto */
        .card-proyecto { 
            border: none; 
            border-radius: 10px; 
            transition: all 0.2s ease-in-out; 
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .card-proyecto:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important; }
        
        .avance-alto { border-left: 6px solid #198754 !important; }
        .avance-medio { border-left: 6px solid #ffc107 !important; }
        .avance-bajo { border-left: 6px solid #dc3545 !important; }
        
        #buscador { border-radius: 50px; padding-left: 20px; border: 2px solid #dee2e6; }
        #buscador:focus { border-color: var(--mef-blue); box-shadow: none; }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark mb-4">
        <div class="container d-flex justify-content-between">
            <span class="navbar-brand fw-bold">üèõÔ∏è MONITOR PRESUPUESTAL: GORE LAMBAYEQUE</span>
            <span class="badge bg-light text-dark">Datos Reales MEF</span>
        </div>
    </nav>

    <div class="container">
        <div class="row mb-4">
            <div class="col-md-4 mb-3">
                <div class="card card-kpi bg-primary p-3 h-100 shadow-sm">
                    <small class="text-uppercase opacity-75 fw-bold">Presupuesto Total (PIM)</small>
                    <h3 id="total-pim" class="fw-bold mb-0">S/ 0.00</h3>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card card-kpi bg-success p-3 h-100 shadow-sm">
                    <small class="text-uppercase opacity-75 fw-bold">Total Ejecutado</small>
                    <h3 id="total-ejecutado" class="fw-bold mb-0">S/ 0.00</h3>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card card-kpi bg-dark p-3 h-100 shadow-sm">
                    <small class="text-uppercase opacity-75 fw-bold">Avance Global</small>
                    <h3 id="avance-global" class="fw-bold mb-0">0%</h3>
                </div>
            </div>
        </div>

        <div class="card p-4 mb-4 shadow-sm border-0">
            <div class="row g-3 align-items-end">
                <div class="col-lg-5">
                    <label class="small fw-bold text-muted mb-1">üîç BUSCAR PROYECTO</label>
                    <input type="text" id="buscador" class="form-control" placeholder="Nombre de obra, t√∫nel, hospital...">
                </div>
                <div class="col-lg-2">
                    <label class="small fw-bold text-muted mb-1">üìÖ A√ëO FISCAL</label>
                    <select id="select-anio" class="form-select"></select>
                </div>
                <div class="col-lg-5">
                    <label class="small fw-bold text-muted mb-1">üìä FILTRAR POR AVANCE</label>
                    <div class="btn-group w-100">
                        <button class="btn btn-outline-danger btn-sm" onclick="setRango('bajo')">0-30%</button>
                        <button class="btn btn-outline-warning btn-sm text-dark" onclick="setRango('medio')">30-70%</button>
                        <button class="btn btn-outline-success btn-sm" onclick="setRango('alto')">70-100%</button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="setRango('todos')">Todos</button>
                    </div>
                </div>
            </div>
            <div class="mt-3 text-end">
                <button class="btn btn-link btn-sm text-primary p-0 text-decoration-none" onclick="exportarCSV()">üì• Exportar Reporte para Excel</button>
            </div>
        </div>
        
        <div id="estado" class="text-center my-3 fw-bold text-secondary">Iniciando sistema...</div>

        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="contenedor-proyectos"></div>
    </div>

    <footer class="text-center py-5 text-muted small">
        ¬© 2026 GORE Lambayeque | Sistema de Transparencia Econ√≥mica
    </footer>

    <script src="script.js"></script>
</body>
</html>
